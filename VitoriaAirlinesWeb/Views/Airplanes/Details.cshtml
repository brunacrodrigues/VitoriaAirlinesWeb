@model VitoriaAirlinesWeb.Data.Entities.Airplane
@using VitoriaAirlinesWeb.Data.Enums

@{
    ViewData["Title"] = "Airplane Details";
}

<div class="main-content">
    <h2 class="mb-4 text-light text-center">Airplane Model: @Model.Model</h2>

    <div class="d-flex flex-wrap justify-content-center gap-5">

        <div class="flex-shrink-0 text-light" style="max-width: 400px;">
            <img src="@Model.ImageFullPath" alt="Airplane Image"
                 class="img-fluid rounded mb-4 w-100" style="border: 3px solid #444;" />

            <dl class="row">
                <dt class="col-sm-6">Executive Seats</dt>
                <dd class="col-sm-6">@Model.TotalExecutiveSeats</dd>

                <dt class="col-sm-6">Economy Seats</dt>
                <dd class="col-sm-6">@Model.TotalEconomySeats</dd>

                <dt class="col-sm-6">Status</dt>
                <dd class="col-sm-6">
                    @switch (Model.Status)
                    {
                        case AirplaneStatus.Active:
                            <span class="badge bg-success">Active</span>
                            break;
                        case AirplaneStatus.Inactive:
                            <span class="badge bg-secondary">Inactive</span>
                            break;
                        case AirplaneStatus.Maintenance:
                            <span class="badge bg-warning text-dark">Maintenance</span>
                            break;
                    }
                </dd>

            </dl>

            <div class="mt-3">
                <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-outline-warning me-2">Edit</a>
                <a asp-action="Index" class="btn btn-outline-light">Back to List</a>
            </div>
        </div>

        <div class="d-flex flex-column flex-md-row gap-4">

            <!-- Executive Class -->
            <div class="text-light text-center">
                <h5>Executive Class</h5>
                <div class="airplane-layout small-seat-layout">
                    @foreach (var row in Model.Seats
                                        .Where(s => s.Class == SeatClass.Executive)
                                        .GroupBy(s => s.Row)
                                        .OrderBy(g => g.Key))
                    {
                        <div class="seat-row">
                            @foreach (var seat in row.OrderBy(s => s.Letter))
                            {
                                <div class="seat">@seat.Row@seat.Letter</div>
                                @if (seat.Letter == "C")
                                {
                                    <div class="seat-gap"></div>
                                }
                            }
                        </div>
                    }
                </div>
            </div>

            <!-- Economy Class -->
            <div class="text-light text-center">
                <h5>Economy Class</h5>
                <div class="airplane-layout small-seat-layout">
                    @foreach (var row in Model.Seats
                                        .Where(s => s.Class == SeatClass.Economy)
                                        .GroupBy(s => s.Row)
                                        .OrderBy(g => g.Key))
                    {
                        <div class="seat-row">
                            @foreach (var seat in row.OrderBy(s => s.Letter))
                            {
                                <div class="seat">@seat.Row@seat.Letter</div>
                                @if (seat.Letter == "C")
                                {
                                    <div class="seat-gap"></div>
                                }
                            }
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

